import{Base}from"./Base.js";class NumberFuncs extends Base{constructor(){super()}numberFormater(r={style:"currency",currency:"EUR"},t="fr-FR"){let e;try{if(t&&"string"!=typeof t)throw new Error("Invalid local.");if(r&&!(r instanceof Object))throw new Error("Invalid options.");e=new Intl.NumberFormat(t,r)}catch(r){return this.error(r)}return e}range(r=100,t=0,e=1,n=0){let o;try{if("number"!=typeof r)throw new Error("Invalid max.");if("number"!=typeof t)throw new Error("Invalid min.");if("number"!=typeof e)throw new Error("Invalid step.");if("number"!=typeof n)throw new Error("Invalid type.");for(var a=[];t<=r;)a.push(t),t+=e;var i=a.join(" "),s=[a,i];o=s[n]}catch(r){return this.error(r)}return o}rand(r=101,t=0){let e;try{if("number"!=typeof r)throw new Error("Invalid max.");if("number"!=typeof t)throw new Error("Invalid min.");e=Math.floor(Math.random()*(r-t))+t}catch(r){return this.error(r)}return e}isEven(r){let t;try{if("number"!=typeof r)throw new Error("Invalid num.");t=!(1&r)}catch(r){return this.error(r)}return t}sum(r){let t;try{if(!(r instanceof Array))throw new Error("Invalid nums.");t=r.reduce((r,t)=>r+t)}catch(r){return this.error(r)}return t}avg(r){let t;try{if(!(r instanceof Array))throw new Error("Invalid nums.");var e=this.sum(r);t=e/r.length}catch(r){return this.error(r)}return t}median(r){let t;try{if(!(r instanceof Array))throw new Error("Invalid nums.");var e,n=r.toSorted((r,t)=>r-t);t=this.isEven(n.length)?(e=n.length/2,this.avg([n[e-1],n[e]])):n[Math.floor(n.length/2)]}catch(r){return this.error(r)}return t}clamp(r,t,e){let n;try{if("number"!=typeof r)throw new Error("Invalid num.");if("number"!=typeof t)throw new Error("Invalid min.");if("number"!=typeof e)throw new Error("Invalid max.");n=Math.min(Math.max(r,t),e)}catch(r){return this.error(r)}return n}}class StringFuncs extends Base{constructor(){super()}getString(r="letters"){let t;try{if("string"!=typeof r)throw new Error("Invalid type.");var e={letters:"abcdefghijklmnopqrstuvwxyz",numbers:"0123456789",symbols:"$%-/\\+*.&! §:;?,(){}[]@#~¨^²°|`'\"_=¤£µ€"};"all"===r&&(t=e.letters+e.numbers+e.symbols),t=e[r]}catch(r){return this.error(r)}return t}formatText(r){let t;try{if("string"!=typeof r)throw new Error("Invalid string.");var e="",e=""+r[0].toUpperCase()+r.substring(1).toLowerCase();t=e.replaceAll("-"," ").trim()}catch(r){return this.error(r)}return t}shuffle(t){let e="";try{if("string"!=typeof t)throw new Error("Invalid string.");for(let r=0;r<t.length;r++){var n=Math.floor(Math.random()*t.length);e+=t[n]}}catch(r){return this.error(r)}return e}strRev(r){let t;try{if("string"!=typeof r)throw new Error("Invalid str.");t=r.split("").reverse().join("").toLowerCase()}catch(r){return this.error(r)}return t}slug(r){let t;try{if("string"!=typeof r)throw new Error("Invalid string.");t=r.match(/\w+/)?.[0]}catch(r){return this.error(r)}return t}}class DateFuncs extends Base{constructor(){super()}dateFormater(r,t="fr-FR"){let e;try{if(t&&"string"!=typeof t)throw new Error("Invalid local.");if(r&&!(r instanceof Object))throw new Error("Invalid options.");e=new Intl.DateTimeFormat(t,r)}catch(r){return this.error(r)}return e}relativeDateFormater(r={numeric:"auto"},t="fr-FR"){let e;try{if(t&&"string"!=typeof t)throw new Error("Invalid local.");if(r&&!(r instanceof Object))throw new Error("Invalid options.");e=new Intl.RelativeTimeFormat(t,r)}catch(r){return this.error(r)}return e}dateToUnix(r){let t;try{if(!(r instanceof Date))throw new Error("Invalid date.");t=Math.round(Date.parse(r)/1e3)}catch(r){return this.error(r)}return t}unixToDate(r){let t;try{if("number"!=typeof r)throw new Error("Invalid unix.");t=new Date(1e3*r)}catch(r){return this.error(r)}return t}dayToSeconds(r=7){let t;try{if("number"!=typeof r)throw new Error("Invalid day.");t=86400*r}catch(r){return this.error(r)}return t}secondsToDay(r){let t;try{if("number"!=typeof r)throw new Error("Invalid seconds.");t=Math.round(r/86400)}catch(r){return this.error(r)}return t}}class Dom extends Base{constructor(){super()}select(r){let t;try{if("string"!=typeof r)throw new Error("Invalid tag.");t=document.querySelector(r)}catch(r){return this.error(r)}return t}selectAll(r){let t;try{if("string"!=typeof r)throw new Error("Invalid tag.");t=Array.from(document.querySelectorAll(r))}catch(r){return this.error(r)}return t}create(r,t){let e;try{if("string"!=typeof r)throw new Error("Invalid tag.");if(e=document.createElement(r),!t)return e;if(!(t instanceof Object))throw new Error("Invalid attribs.");for(var[n,o]of Object.entries(t))e.setAttribute(n,o)}catch(r){return this.error(r)}return e}modClass(r,t,e="add"){try{if(!(r instanceof HTMLElement))throw new Error("Invalid elem.");if("string"!=typeof t)throw new Error("Invalid className.");if("string"!=typeof e)throw new Error("Invalid mod.");({add:()=>r.classList.add(t),del:()=>r.classList.remove(t),tog:()=>r.classList.toggle(t)})[e]()}catch(r){return this.error(r)}return!0}go(r,t=window,e=0,n=0){try{if(!(r instanceof HTMLElement))throw new Error("Invalid to elem.");if(!(t instanceof Object))throw new Error("Invalid from elem.");if("number"!=typeof e)throw new Error("Invalid margeX.");if("number"!=typeof n)throw new Error("Invalid margeY.");t.scroll(r.offsetLeft-e,r.offsetTop-n)}catch(r){return this.error(r)}return!0}notify(t,e,n=2){try{if("string"!=typeof t)throw new Error("Invalid content.");if("string"!=typeof e)throw new Error("Invalid type.");if("number"!=typeof n)throw new Error("Invalid delay.");var o=this.select("#notifications");if(!o)throw new Error("No root in DOM.");let r=this.create("p");e&&this.modClass(r,e),r.textContent=t,o.append(r),setTimeout(()=>{r.remove()},1e3*n)}catch(r){return this.error(r)}return!0}setNavPage(){try{var r=this.select("#nav-page ul");if(!r)throw new Error("No root in DOM.");this.modClass(r,"flex");var t,e=new StringFuncs;for(t of this.selectAll("main > section")){var n,o,a,i,s=t.id.trim();s&&(n=e.formatText(s),o=this.create("li"),a=this.create("a",{class:"link",href:"#"+s,target:"_self"}),i=this.create("h2"),a.textContent=n,i.textContent=n,o.append(a),r.append(o),t.prepend(i))}}catch(r){return this.error(r)}return!0}setCopyright(r="Par ",t={ref:"https://paypal.me/mohamedSkd",text:"Moh. SD"}){try{if(r&&"string"!=typeof r)throw new Error("Invalid info.");if(t&&!(t instanceof Object))throw new Error("Invalid link.");var e=this.select("#copyright");if(!e)throw new Error("No root in DOM.");var n,o=new Date;r||t?t?((n=this.create("a",{href:t.ref,class:"link"})).textContent=t.text,e.append(r,n," © "+o.getFullYear())):e.append(r," © "+o.getFullYear()):e.textContent="© "+o.getFullYear()}catch(r){return this.error(r)}return!0}canvas(r){let t;try{if(!(r instanceof HTMLCanvasElement))throw new Error("Invalid canvas.");let i=r.getContext("2d");if(!i)throw new Error("Invalid context");t={ctxt:i,draw:(r=[0,0],t=10,e="rect",n=!0,o="black")=>{try{if(!(r instanceof Array))throw new Error("Invalid point.");if("number"!=typeof t)throw new Error("Invalid size.");if("string"!=typeof e)throw new Error("Invalid shape.");if("boolean"!=typeof n)throw new Error("Invalid fill.");if("string"!=typeof o)throw new Error("Invalid style.");var a={rect:()=>i.rect(r[0],r[1],t,t),arc:()=>i.arc(r[0],r[1],t/2,0,2*Math.PI)};n?(i.fillStyle=o,i.beginPath(),a[e](),i.fill()):(i.strokeStyle=o,i.beginPath(),a[e](),i.stroke())}catch(r){return this.error(r)}return!0},clear:(r=[0,0],t=i.canvas.width>i.canvas.height?i.canvas.width:i.canvas.height)=>{try{if(!(r instanceof Array))throw new Error("Invalid point.");if("number"!=typeof t)throw new Error("Invalid size.");i.clearRect(r[0],r[1],t,t)}catch(r){return this.error(r)}return!0}}}catch(r){return this.error(r)}return t}}class Fetch extends Base{constructor(){super()}async get(r=location.pathname,t=null,e="json"){let n;try{if(t&&!(t instanceof Object))throw new Error("Invalid value.");if("string"!=typeof r)throw new Error("Invalid target.");if("string"!=typeof e)throw new Error("Invalid rType.");var o=this.objToReq(t),a=await fetch(o?r+"?"+o:r);switch(e){case"json":n=await a.json();break;case"text":n=await a.text()}}catch(r){return this.error(r)}return n}async post(r=location.pathname,t=null,e="json"){let n;try{if(t&&!(t instanceof Object))throw new Error("Invalid value.");if("string"!=typeof r)throw new Error("Invalid target.");if("string"!=typeof e)throw new Error("Invalid rType.");var o=this.objToReq(t),a=await fetch(r,{method:"post",body:o,headers:{"content-type":"application/x-www-form-urlencoded"}});switch(e){case"json":n=await a.json();break;case"text":n=await a.text()}}catch(r){return this.error(r)}return n}objToReq(r){let t="";try{if(!r)return null;if(!(r instanceof Object))throw new Error("Invalid value.");for(var e in r){var n=(""+r[e]).trim();t+=e+`=${n}&`}}catch(r){return this.error(r)}return t}local(t){let r;try{if("string"!=typeof t)throw new Error("Invalid key.");r={get:()=>JSON.parse(localStorage.getItem(t)),set:r=>{localStorage.setItem(t,JSON.stringify(r))}}}catch(r){return this.error(r)}return r}}export{NumberFuncs,StringFuncs,DateFuncs,Dom,Fetch};